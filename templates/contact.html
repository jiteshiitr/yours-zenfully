{% extends "base.html" %}

{% block title %}
  Yours Zenfully - Therapy for Everyone
{% endblock %}

{% block main_content %}

<script>
    /**
    * The following event is sent when the page loads. You could
    * wrap the event in a JavaScript function so the event is
    * sent when the user performs some action.
    */
    gtag('event', 'contact_view', {
      'app_name': 'YoursZenfully',
      'screen_name': 'contact'
    });
</script> 

<!-- ======= Contact Section ======= -->
<section id="contact" class="contact">
    <div class="container rounded shadow-sm p-4 mx-auto" data-aos="fade-up">
      <div class="section-header">
        <h2>Consult a Therapist</h2>
        <p>Send your query here and we will match you with the best possible therapist</p>
      </div>

      <div class="row gx-lg-0 gy-4">
        <div class="col-lg-4">
          <div class="info-container d-flex flex-column align-items-center justify-content-center rounded shadow-sm p-4">
            <div class="info-item d-flex">
              <i class="bi bi-geo-alt flex-shrink-0"></i>
              <div>
                <h4>Location:</h4>
                <p>RMZ Ecospace, Bangalore</p>
              </div>
            </div>
            <div class="info-item d-flex">
              <i class="bi bi-envelope flex-shrink-0"></i>
              <div>
                <h4>Email:</h4>
                <p>zenai.sherpa@gmail.com</p>
              </div>
            </div>
            <div class="info-item d-flex">
              <i class="bi bi-phone flex-shrink-0"></i>
              <div>
                <h4>Call:</h4>
                <p>+91 81267 82445</p>
              </div>
            </div>
            <div class="info-item d-flex">
              <i class="bi bi-clock flex-shrink-0"></i>
              <div>
                <h4>Open Hours:</h4>
                <p>Mon-Sat: 11 AM - 8 PM</p>
              </div>
            </div>
          </div>
        </div>

        <div class="contact-form">
          <h2>Contact Us</h2>
          <form id="contact-form">
              <div class="form-group">
                  <label for="name">Name*</label>
                  <input type="text" id="name" name="name" required>
              </div>
              <div class="form-group">
                  <label for="phone">Phone*</label>
                  <input type="tel" id="phone" name="phone" required>
              </div>
              <div class="form-group">
                  <label for="message">Please describe briefly what would you like to discuss with our therapist?</label>
                  <textarea id="message" name="message" rows="5"></textarea>
              </div>
              <button type="submit">Submit</button>
          </form>
        </div>
      </div>
    </div>
    <div class="text-center mt-4">
        <a href="/#hero" class="btn-view-all">Explore Yours Zenfully</a>
    </div>
</section>
<!-- End Contact Section -->

<script>
  document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault();

      // Collect form data
      const formData = new FormData(this);
      const data = {
          properties: {
              email: 'jjj.aaa0517@example.com',
              firstname: formData.get('name'),
              lastname: '',
              phone: formData.get('phone'),
              message: formData.get('message')
          }
      };

      console.log('Form Data:', data);

      // Make the POST request
      fetch('https://omj33xy5jl.execute-api.ap-southeast-1.amazonaws.com/dev/contact', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
      })
      .then(response => {
          console.log('Response:', response);
          if (!response.ok) {
              throw new Error('Network response was not ok ' + response.statusText);
          }
          return response.json();
      })
      .then(result => {
          console.log('Result:', result);
          alert('Form submitted successfully!');
          document.getElementById('contact-form').reset();
      })
      .catch(error => {
          alert('There was an error submitting the form. Please try again.');
          console.error('Error:', error);
      });
  });
</script>


{% endblock %}

{% block extra_js %}
{% endblock %}
